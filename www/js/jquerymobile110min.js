(function (e, t, n) { typeof define === "function" && define.amd ? define(["jquery"], function (r) { n(r, e, t); return r.mobile }) : n(e.jQuery, e, t) })(this, document, function (e, t, n) { (function (e, t, n, r) { function i(e) { for (; e && typeof e.originalEvent !== "undefined";) e = e.originalEvent; return e } function s(t) { for (var n = {}, r, i; t;) { r = e.data(t, m); for (i in r) if (r[i]) n[i] = n.hasVirtualBinding = true; t = t.parentNode } return n } function o() { E && (clearTimeout(E), E = 0); E = setTimeout(function () { M = E = 0; N.length = 0; C = false; k = true }, e.vmouse.resetTimerDuration) } function u(t, n, s) { var o, u; if (!(u = s && s[t])) { if (s = !s) e: { for (s = n.target; s;) { if ((u = e.data(s, m)) && (!t || u[t])) break e; s = s.parentNode } s = null } u = s } if (u) { o = n; var s = o.type, a, f; o = e.Event(o); o.type = t; u = o.originalEvent; a = e.event.props; s.search(/^(mouse|click)/) > -1 && (a = b); if (u) for (f = a.length; f;) t = a[--f], o[t] = u[t]; if (s.search(/mouse(down|up)|click/) > -1 && !o.which) o.which = 1; if (s.search(/^touch/) !== -1 && (t = i(u), s = t.touches, t = t.changedTouches, s = s && s.length ? s[0] : t && t.length ? t[0] : r)) for (u = 0, len = y.length; u < len; u++) t = y[u], o[t] = s[t]; e(n.target).trigger(o) } return o } function a(t) { var n = e.data(t.target, g); if (!C && (!M || M !== n)) if (n = u("v" + t.type, t)) n.isDefaultPrevented() && t.preventDefault(), n.isPropagationStopped() && t.stopPropagation(), n.isImmediatePropagationStopped() && t.stopImmediatePropagation() } function f(t) { var n = i(t).touches, r; if (n && n.length === 1 && (r = t.target, n = s(r), n.hasVirtualBinding)) M = O++, e.data(r, g, M), E && (clearTimeout(E), E = 0), T = k = false, r = i(t).touches[0], S = r.pageX, x = r.pageY, u("vmouseover", t, n), u("vmousedown", t, n) } function l(e) { k || (T || u("vmousecancel", e, s(e.target)), T = true, o()) } function c(t) { if (!k) { var n = i(t).touches[0], r = T, a = e.vmouse.moveDistanceThreshold; T = T || Math.abs(n.pageX - S) > a || Math.abs(n.pageY - x) > a; flags = s(t.target); T && !r && u("vmousecancel", t, flags); u("vmousemove", t, flags); o() } } function h(e) { if (!k) { k = true; var t = s(e.target), n; u("vmouseup", e, t); if (!T && (n = u("vclick", e, t)) && n.isDefaultPrevented()) n = i(e).changedTouches[0], N.push({ touchID: M, x: n.clientX, y: n.clientY }), C = true; u("vmouseout", e, t); T = false; o() } } function p(t) { var t = e.data(t, m), n; if (t) for (n in t) if (t[n]) return true; return false } function d() { } function v(t) { var n = t.substr(1); return { setup: function () { p(this) || e.data(this, m, {}); e.data(this, m)[t] = true; w[t] = (w[t] || 0) + 1; w[t] === 1 && A.bind(n, a); e(this).bind(n, d); if (L) w.touchstart = (w.touchstart || 0) + 1, w.touchstart === 1 && A.bind("touchstart", f).bind("touchend", h).bind("touchmove", c).bind("scroll", l) }, teardown: function () { --w[t]; w[t] || A.unbind(n, a); L && (--w.touchstart, w.touchstart || A.unbind("touchstart", f).unbind("touchmove", c).unbind("touchend", h).unbind("scroll", l)); var r = e(this), i = e.data(this, m); i && (i[t] = false); r.unbind(n, d); p(this) || r.removeData(m) } } } var m = "virtualMouseBindings", g = "virtualTouchID", t = "vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "), y = "clientX clientY pageX pageY screenX screenY".split(" "), b = e.event.props.concat(e.event.mouseHooks ? e.event.mouseHooks.props : []), w = {}, E = 0, S = 0, x = 0, T = false, N = [], C = false, k = false, L = "addEventListener" in n, A = e(n), O = 1, M = 0; e.vmouse = { moveDistanceThreshold: 10, clickDistanceThreshold: 10, resetTimerDuration: 1500 }; for (var _ = 0; _ < t.length; _++) e.event.special[t[_]] = v(t[_]); L && n.addEventListener("click", function (t) { var n = N.length, r = t.target, i, s, o, u, a; if (n) { i = t.clientX; s = t.clientY; threshold = e.vmouse.clickDistanceThreshold; for (o = r; o;) { for (u = 0; u < n; u++) if (a = N[u], o === r && Math.abs(a.x - i) < threshold && Math.abs(a.y - s) < threshold || e.data(o, g) === a.touchID) { t.preventDefault(); t.stopPropagation(); return } o = o.parentNode } } }, true) })(jQuery, t, n); (function (e, t, r) { function i(e) { e = e || location.href; return "#" + e.replace(/^[^#]*#?(.*)$/, "$1") } var s = "hashchange", o = n, u, a = e.event.special, f = o.documentMode, l = "on" + s in t && (f === r || f > 7); e.fn[s] = function (e) { return e ? this.bind(s, e) : this.trigger(s) }; e.fn[s].delay = 50; a[s] = e.extend(a[s], { setup: function () { if (l) return false; e(u.start) }, teardown: function () { if (l) return false; e(u.stop) } }); u = function () { function n() { var r = i(), o = p(f); if (r !== f) h(f = r, o), e(t).trigger(s); else if (o !== f) location.href = location.href.replace(/#.*/, "") + o; a = setTimeout(n, e.fn[s].delay) } var u = {}, a, f = i(), c = function (e) { return e }, h = c, p = c; u.start = function () { a || n() }; u.stop = function () { a && clearTimeout(a); a = r }; e.browser.msie && !l && function () { var t, r; u.start = function () { if (!t) r = (r = e.fn[s].src) && r + i(), t = e('<iframe tabindex="-1" title="empty"/>').hide().one("load", function () { r || h(i()); n() }).attr("src", r || "javascript:0").insertAfter("body")[0].contentWindow, o.onpropertychange = function () { try { if (event.propertyName === "title") t.document.title = o.title } catch (e) { } } }; u.stop = c; p = function () { return i(t.location.href) }; h = function (n, r) { var i = t.document, u = e.fn[s].domain; if (n !== r) i.title = o.title, i.open(), u && i.write('<script>document.domain="' + u + '"</script>'), i.close(), t.location.hash = n } }(); return u }() })(jQuery, this); (function (e, t) { if (e.cleanData) { var n = e.cleanData; e.cleanData = function (t) { for (var r = 0, i; (i = t[r]) != null; r++) e(i).triggerHandler("remove"); n(t) } } else { var r = e.fn.remove; e.fn.remove = function (t, n) { return this.each(function () { n || (!t || e.filter(t, [this]).length) && e("*", this).add([this]).each(function () { e(this).triggerHandler("remove") }); return r.call(e(this), t, n) }) } } e.widget = function (t, n, r) { var i = t.split(".")[0], s, t = t.split(".")[1]; s = i + "-" + t; if (!r) r = n, n = e.Widget; e.expr[":"][s] = function (n) { return !!e.data(n, t) }; e[i] = e[i] || {}; e[i][t] = function (e, t) { arguments.length && this._createWidget(e, t) }; n = new n; n.options = e.extend(true, {}, n.options); e[i][t].prototype = e.extend(true, n, { namespace: i, widgetName: t, widgetEventPrefix: e[i][t].prototype.widgetEventPrefix || t, widgetBaseClass: s }, r); e.widget.bridge(t, e[i][t]) }; e.widget.bridge = function (n, r) { e.fn[n] = function (i) { var s = typeof i === "string", o = Array.prototype.slice.call(arguments, 1), u = this, i = !s && o.length ? e.extend.apply(null, [true, i].concat(o)) : i; if (s && i.charAt(0) === "_") return u; s ? this.each(function () { var r = e.data(this, n); if (!r) throw "cannot call methods on " + n + " prior to initialization; attempted to call method '" + i + "'"; if (!e.isFunction(r[i])) throw "no such method '" + i + "' for " + n + " widget instance"; var s = r[i].apply(r, o); if (s !== r && s !== t) return u = s, false }) : this.each(function () { var t = e.data(this, n); t ? t.option(i || {})._init() : e.data(this, n, new r(i, this)) }); return u } }; e.Widget = function (e, t) { arguments.length && this._createWidget(e, t) }; e.Widget.prototype = { widgetName: "widget", widgetEventPrefix: "", options: { disabled: false }, _createWidget: function (t, n) { e.data(n, this.widgetName, this); this.element = e(n); this.options = e.extend(true, {}, this.options, this._getCreateOptions(), t); var r = this; this.element.bind("remove." + this.widgetName, function () { r.destroy() }); this._create(); this._trigger("create"); this._init() }, _getCreateOptions: function () { var t = {}; e.metadata && (t = e.metadata.get(element)[this.widgetName]); return t }, _create: function () { }, _init: function () { }, destroy: function () { this.element.unbind("." + this.widgetName).removeData(this.widgetName); this.widget().unbind("." + this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass + "-disabled ui-state-disabled") }, widget: function () { return this.element }, option: function (n, r) { var i = n; if (arguments.length === 0) return e.extend({}, this.options); if (typeof n === "string") { if (r === t) return this.options[n]; i = {}; i[n] = r } this._setOptions(i); return this }, _setOptions: function (t) { var n = this; e.each(t, function (e, t) { n._setOption(e, t) }); return this }, _setOption: function (e, t) { this.options[e] = t; e === "disabled" && this.widget()[t ? "addClass" : "removeClass"](this.widgetBaseClass + "-disabled ui-state-disabled").attr("aria-disabled", t); return this }, enable: function () { return this._setOption("disabled", false) }, disable: function () { return this._setOption("disabled", true) }, _trigger: function (t, n, r) { var i = this.options[t], n = e.Event(n); n.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(); r = r || {}; if (n.originalEvent) for (var t = e.event.props.length, s; t;) s = e.event.props[--t], n[s] = n.originalEvent[s]; this.element.trigger(n, r); return !(e.isFunction(i) && i.call(this.element[0], n, r) === false || n.isDefaultPrevented()) } } })(jQuery); (function (e, t) { e.widget("mobile.widget", { _createWidget: function () { e.Widget.prototype._createWidget.apply(this, arguments); this._trigger("init") }, _getCreateOptions: function () { var n = this.element, r = {}; e.each(this.options, function (e) { var i = n.jqmData(e.replace(/[A-Z]/g, function (e) { return "-" + e.toLowerCase() })); i !== t && (r[e] = i) }); return r }, enhanceWithin: function (t, n) { this.enhance(e(this.options.initSelector, e(t)), n) }, enhance: function (t, n) { var r, i = e(t), i = e.mobile.enhanceable(i); n && i.length && (r = (r = e.mobile.closestPageData(i)) && r.keepNativeSelector() || "", i = i.not(r)); i[this.widgetName]() }, raise: function (e) { throw "Widget [" + this.widgetName + "]: " + e } }) })(jQuery); (function (e, t) { var r = {}; e.mobile = e.extend({}, { version: "1.1.0", ns: "", subPageUrlKey: "ui-page", activePageClass: "ui-page-active", activeBtnClass: "ui-btn-active", focusClass: "ui-focus", ajaxEnabled: true, hashListeningEnabled: true, linkBindingEnabled: true, defaultPageTransition: "fade", maxTransitionWidth: false, minScrollBack: 250, touchOverflowEnabled: false, defaultDialogTransition: "pop", loadingMessage: "loading", pageLoadErrorMessage: "Error Loading Page", loadingMessageTextVisible: false, loadingMessageTheme: "a", pageLoadErrorMessageTheme: "e", autoInitializePage: true, pushStateEnabled: true, ignoreContentEnabled: false, orientationChangeEnabled: true, buttonMarkup: { hoverDelay: 200 }, keyCode: { ALT: 18, BACKSPACE: 8, CAPS_LOCK: 20, COMMA: 188, COMMAND: 91, COMMAND_LEFT: 91, COMMAND_RIGHT: 93, CONTROL: 17, DELETE: 46, DOWN: 40, END: 35, ENTER: 13, ESCAPE: 27, HOME: 36, INSERT: 45, LEFT: 37, MENU: 93, NUMPAD_ADD: 107, NUMPAD_DECIMAL: 110, NUMPAD_DIVIDE: 111, NUMPAD_ENTER: 108, NUMPAD_MULTIPLY: 106, NUMPAD_SUBTRACT: 109, PAGE_DOWN: 34, PAGE_UP: 33, PERIOD: 190, RIGHT: 39, SHIFT: 16, SPACE: 32, TAB: 9, UP: 38, WINDOWS: 91 }, silentScroll: function (r) { if (e.type(r) !== "number") r = e.mobile.defaultHomeScroll; e.event.special.scrollstart.enabled = false; setTimeout(function () { t.scrollTo(0, r); e(n).trigger("silentscroll", { x: 0, y: r }) }, 20); setTimeout(function () { e.event.special.scrollstart.enabled = true }, 150) }, nsNormalizeDict: r, nsNormalize: function (t) { return !t ? void 0 : r[t] || (r[t] = e.camelCase(e.mobile.ns + t)) }, getInheritedTheme: function (e, t) { for (var n = e[0], r = "", i = /ui-(bar|body|overlay)-([a-z])\b/, s, o; n;) { s = n.className || ""; if ((o = i.exec(s)) && (r = o[2])) break; n = n.parentNode } return r || t || "a" }, closestPageData: function (e) { return e.closest(':jqmData(role="page"), :jqmData(role="dialog")').data("page") }, enhanceable: function (e) { return this.haveParents(e, "enhance") }, hijackable: function (e) { return this.haveParents(e, "ajax") }, haveParents: function (t, n) { if (!e.mobile.ignoreContentEnabled) return t; for (var r = t.length, i = e(), s, o, u, a = 0; a < r; a++) { o = t.eq(a); u = false; for (s = t[a]; s;) { if ((s.getAttribute ? s.getAttribute("data-" + e.mobile.ns + n) : "") === "false") { u = true; break } s = s.parentNode } u || (i = i.add(o)) } return i } }, e.mobile); e.fn.jqmData = function (t, n) { var r; typeof t != "undefined" && (t && (t = e.mobile.nsNormalize(t)), r = this.data.apply(this, arguments.length < 2 ? [t] : [t, n])); return r }; e.jqmData = function (t, n, r) { var i; typeof n != "undefined" && (i = e.data(t, n ? e.mobile.nsNormalize(n) : n, r)); return i }; e.fn.jqmRemoveData = function (t) { return this.removeData(e.mobile.nsNormalize(t)) }; e.jqmRemoveData = function (t, n) { return e.removeData(t, e.mobile.nsNormalize(n)) }; e.fn.removeWithDependents = function () { e.removeWithDependents(this) }; e.removeWithDependents = function (t) { t = e(t); (t.jqmData("dependents") || e()).remove(); t.remove() }; e.fn.addDependents = function (t) { e.addDependents(e(this), t) }; e.addDependents = function (t, n) { var r = e(t).jqmData("dependents") || e(); e(t).jqmData("dependents", e.merge(r, n)) }; e.fn.getEncodedText = function () { return e("<div/>").text(e(this).text()).html() }; e.fn.jqmEnhanceable = function () { return e.mobile.enhanceable(this) }; e.fn.jqmHijackable = function () { return e.mobile.hijackable(this) }; var i = e.find, s = /:jqmData\(([^)]*)\)/g; e.find = function (t, n, r, o) { t = t.replace(s, "[data-" + (e.mobile.ns || "") + "$1]"); return i.call(this, t, n, r, o) }; e.extend(e.find, i); e.find.matches = function (t, n) { return e.find(t, null, null, n) }; e.find.matchesSelector = function (t, n) { return e.find(n, null, null, [t]).length > 0 } })(jQuery, this); (function (e) { e(t); var r = e("html"); e.mobile.media = function () { var t = {}, i = e("<div id='jquery-mediatest'>"), s = e("<body>").append(i); return function (e) { if (!(e in t)) { var o = n.createElement("style"), u = "@media " + e + " { #jquery-mediatest { position:absolute; } }"; o.type = "text/css"; o.styleSheet ? o.styleSheet.cssText = u : o.appendChild(n.createTextNode(u)); r.prepend(s).prepend(o); t[e] = i.css("position") === "absolute"; s.add(o).remove() } return t[e] } }() })(jQuery); (function (e, r) { function s(e) { var t = e.charAt(0).toUpperCase() + e.substr(1), e = (e + " " + f.join(t + " ") + t).split(" "), n; for (n in e) if (a[e[n]] !== r) return true } function o(e, t, r) { var s = n.createElement("div"), r = r ? [r] : f, o; for (i = 0; i < r.length; i++) { var u = r[i], a = "-" + u.charAt(0).toLowerCase() + u.substr(1) + "-" + e + ": " + t + ";", u = u.charAt(0).toUpperCase() + u.substr(1) + (e.charAt(0).toUpperCase() + e.substr(1)); s.setAttribute("style", a); s.style[u] && (o = true) } return !!o } var u = e("<body>").prependTo("html"), a = u[0].style, f = ["Webkit", "Moz", "O"], l = "palmGetResource" in t, c = t.operamini && {}.toString.call(t.operamini) === "[object OperaMini]", h = t.blackberry; e.extend(e.mobile, { browser: {} }); e.mobile.browser.ie = function () { for (var e = 3, t = n.createElement("div"), r = t.all || []; t.innerHTML = "<!--[if gt IE " + ++e + "]><br><![endif]-->", r[0];); return e > 4 ? e : !e }(); e.extend(e.support, { orientation: "orientation" in t && "onorientationchange" in t, touch: "ontouchend" in n, cssTransitions: "WebKitTransitionEvent" in t || o("transition", "height 100ms linear"), pushState: "pushState" in history && "replaceState" in history, mediaquery: e.mobile.media("only all"), cssPseudoElement: !!s("content"), touchOverflow: !!s("overflowScrolling"), cssTransform3d: o("perspective", "10px", "moz") || e.mobile.media("(-" + f.join("-transform-3d),(-") + "-transform-3d),(transform-3d)"), boxShadow: !!s("boxShadow") && !h, scrollTop: ("pageXOffset" in t || "scrollTop" in n.documentElement || "scrollTop" in u[0]) && !l && !c, dynamicBaseTag: function () { var t = location.protocol + "//" + location.host + location.pathname + "ui-dir/", n = e("head base"), r = null, i = "", s; n.length ? i = n.attr("href") : n = r = e("<base>", { href: t }).appendTo("head"); s = e("<a href='testurl' />").prependTo(u)[0].href; n[0].href = i || location.pathname; r && r.remove(); return s.indexOf(t) === 0 }() }); u.remove(); l = function () { var e = t.navigator.userAgent; return e.indexOf("Nokia") > -1 && (e.indexOf("Symbian/3") > -1 || e.indexOf("Series60/5") > -1) && e.indexOf("AppleWebKit") > -1 && e.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/) }(); e.mobile.gradeA = function () { return e.support.mediaquery || e.mobile.browser.ie && e.mobile.browser.ie >= 7 }; e.mobile.ajaxBlacklist = t.blackberry && !t.WebKitPoint || c || l; l && e(function () { e("head link[rel='stylesheet']").attr("rel", "alternate stylesheet").attr("rel", "stylesheet") }); e.support.boxShadow || e("html").addClass("ui-mobile-nosupport-boxshadow") })(jQuery); (function (e, t, r) { function i(t, n, r) { var i = r.type; r.type = n; e.event.handle.call(t, r); r.type = i } e.each("touchstart touchmove touchend orientationchange throttledresize tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "), function (t, n) { e.fn[n] = function (e) { return e ? this.bind(n, e) : this.trigger(n) }; e.attrFn[n] = true }); var s = e.support.touch, o = s ? "touchstart" : "mousedown", u = s ? "touchend" : "mouseup", a = s ? "touchmove" : "mousemove"; e.event.special.scrollstart = { enabled: true, setup: function () { function t(e, t) { r = t; i(n, r ? "scrollstart" : "scrollstop", e) } var n = this, r, s; e(n).bind("touchmove scroll", function (n) { e.event.special.scrollstart.enabled && (r || t(n, true), clearTimeout(s), s = setTimeout(function () { t(n, false) }, 50)) }) } }; e.event.special.tap = { setup: function () { var t = this, r = e(t); r.bind("vmousedown", function (s) { function o() { clearTimeout(l) } function u() { o(); r.unbind("vclick", a).unbind("vmouseup", o); e(n).unbind("vmousecancel", u) } function a(e) { u(); f == e.target && i(t, "tap", e) } if (s.which && s.which !== 1) return false; var f = s.target, l; r.bind("vmouseup", o).bind("vclick", a); e(n).bind("vmousecancel", u); l = setTimeout(function () { i(t, "taphold", e.Event("taphold", { target: f })) }, 750) }) } }; e.event.special.swipe = { scrollSupressionThreshold: 10, durationThreshold: 1e3, horizontalDistanceThreshold: 30, verticalDistanceThreshold: 75, setup: function () { var t = e(this); t.bind(o, function (n) { function i(t) { if (o) { var n = t.originalEvent.touches ? t.originalEvent.touches[0] : t; f = { time: (new Date).getTime(), coords: [n.pageX, n.pageY] }; Math.abs(o.coords[0] - f.coords[0]) > e.event.special.swipe.scrollSupressionThreshold && t.preventDefault() } } var s = n.originalEvent.touches ? n.originalEvent.touches[0] : n, o = { time: (new Date).getTime(), coords: [s.pageX, s.pageY], origin: e(n.target) }, f; t.bind(a, i).one(u, function () { t.unbind(a, i); o && f && f.time - o.time < e.event.special.swipe.durationThreshold && Math.abs(o.coords[0] - f.coords[0]) > e.event.special.swipe.horizontalDistanceThreshold && Math.abs(o.coords[1] - f.coords[1]) < e.event.special.swipe.verticalDistanceThreshold && o.origin.trigger("swipe").trigger(o.coords[0] > f.coords[0] ? "swipeleft" : "swiperight"); o = f = r }) }) } }; (function (e, t) { function r() { var e = s(); e !== o && (o = e, i.trigger("orientationchange")) } var i = e(t), s, o, u, a, f = { 0: true, 180: true }; if (e.support.orientation && (u = t.innerWidth || e(t).width(), a = t.innerHeight || e(t).height(), u = u > a && u - a > 50, a = f[t.orientation], u && a || !u && !a)) f = { "-90": true, 90: true }; e.event.special.orientationchange = { setup: function () { if (e.support.orientation && e.mobile.orientationChangeEnabled) return false; o = s(); i.bind("throttledresize", r) }, teardown: function () { if (e.support.orientation && e.mobile.orientationChangeEnabled) return false; i.unbind("throttledresize", r) }, add: function (e) { var t = e.handler; e.handler = function (e) { e.orientation = s(); return t.apply(this, arguments) } } }; e.event.special.orientationchange.orientation = s = function () { var r = true, r = n.documentElement; return (r = e.support.orientation ? f[t.orientation] : r && r.clientWidth / r.clientHeight < 1.1) ? "portrait" : "landscape" } })(jQuery, t); (function () { e.event.special.throttledresize = { setup: function () { e(this).bind("resize", t) }, teardown: function () { e(this).unbind("resize", t) } }; var t = function () { i = (new Date).getTime(); s = i - n; s >= 250 ? (n = i, e(this).trigger("throttledresize")) : (r && clearTimeout(r), r = setTimeout(t, 250 - s)) }, n = 0, r, i, s })(); e.each({ scrollstop: "scrollstart", taphold: "tap", swipeleft: "swipe", swiperight: "swipe" }, function (t, n) { e.event.special[t] = { setup: function () { e(this).bind(n, e.noop) } } }) })(jQuery, this); (function (e) { e.widget("mobile.page", e.mobile.widget, { options: { theme: "c", domCache: false, keepNativeDefault: ":jqmData(role='none'), :jqmData(role='nojs')" }, _create: function () { var e = this; if (e._trigger("beforecreate") === false) return false; e.element.attr("tabindex", "0").addClass("ui-page ui-body-" + e.options.theme).bind("pagebeforehide", function () { e.removeContainerBackground() }).bind("pagebeforeshow", function () { e.setContainerBackground() }) }, removeContainerBackground: function () { e.mobile.pageContainer.removeClass("ui-overlay-" + e.mobile.getInheritedTheme(this.element.parent())) }, setContainerBackground: function (t) { this.options.theme && e.mobile.pageContainer.addClass("ui-overlay-" + (t || this.options.theme)) }, keepNativeSelector: function () { var t = this.options; return t.keepNative && e.trim(t.keepNative) && t.keepNative !== t.keepNativeDefault ? [t.keepNative, t.keepNativeDefault].join(", ") : t.keepNativeDefault } }) })(jQuery); (function (e, t, n) { var r = function (r) { r === n && (r = true); return function (n, i, s, o) { var u = new e.Deferred, a = i ? " reverse" : "", f = e.mobile.urlHistory.getActive().lastScroll || e.mobile.defaultHomeScroll, l = e.mobile.getScreenHeight(), c = e.mobile.maxTransitionWidth !== false && e(t).width() > e.mobile.maxTransitionWidth, h = !e.support.cssTransitions || c || !n || n === "none", p = function () { e.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-" + n) }, d = function () { e.event.special.scrollstart.enabled = false; t.scrollTo(0, f); setTimeout(function () { e.event.special.scrollstart.enabled = true }, 150) }, v = function () { o.removeClass(e.mobile.activePageClass + " out in reverse " + n).height("") }, c = function () { o && r && v(); s.addClass(e.mobile.activePageClass); e.mobile.focusPage(s); s.height(l + f); d(); h || s.animationComplete(m); s.addClass(n + " in" + a); h && m() }, m = function () { r || o && v(); s.removeClass("out in reverse " + n).height(""); p(); e(t).scrollTop() !== f && d(); u.resolve(n, i, s, o, true) }; p(); o && !h ? (r ? o.animationComplete(c) : c(), o.height(l + e(t).scrollTop()).addClass(n + " out" + a)) : c(); return u.promise() } }, i = r(), r = r(false); e.mobile.defaultTransitionHandler = i; e.mobile.transitionHandlers = { "default": e.mobile.defaultTransitionHandler, sequential: i, simultaneous: r }; e.mobile.transitionFallbacks = {} })(jQuery, this); (function (e, r) { function i(t) { v && (!v.closest(".ui-page-active").length || t) && v.removeClass(e.mobile.activeBtnClass); v = null } function s() { y = false; g.length > 0 && e.mobile.changePage.apply(null, g.pop()) } function o(t, n, r, i) { n && n.data("page")._trigger("beforehide", null, { nextPage: t }); t.data("page")._trigger("beforeshow", null, { prevPage: n || e("") }); e.mobile.hidePageLoadingMsg(); r && !e.support.cssTransform3d && e.mobile.transitionFallbacks[r] && (r = e.mobile.transitionFallbacks[r]); r = (e.mobile.transitionHandlers[r || "default"] || e.mobile.defaultTransitionHandler)(r, i, t, n); r.done(function () { n && n.data("page")._trigger("hide", null, { nextPage: t }); t.data("page")._trigger("show", null, { prevPage: n || e("") }) }); return r } function u() { return t.innerHeight || e(t).height() } function a() { var t = e("." + e.mobile.activePageClass), n = parseFloat(t.css("padding-top")), r = parseFloat(t.css("padding-bottom")); t.css("min-height", u() - n - r) } function f(t, n) { n && t.attr("data-" + e.mobile.ns + "role", n); t.page() } function l(e) { for (; e;) { if (typeof e.nodeName === "string" && e.nodeName.toLowerCase() == "a") break; e = e.parentNode } return e } function c(t) { var t = e(t).closest(".ui-page").jqmData("url"), n = S.hrefNoHash; if (!t || !d.isPath(t)) t = n; return d.makeUrlAbsolute(t, n) } var h = e(t); e("html"); var p = e("head"), d = { urlParseRE: /^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/, parseUrl: function (t) { if (e.type(t) === "object") return t; t = d.urlParseRE.exec(t || "") || []; return { href: t[0] || "", hrefNoHash: t[1] || "", hrefNoSearch: t[2] || "", domain: t[3] || "", protocol: t[4] || "", doubleSlash: t[5] || "", authority: t[6] || "", username: t[8] || "", password: t[9] || "", host: t[10] || "", hostname: t[11] || "", port: t[12] || "", pathname: t[13] || "", directory: t[14] || "", filename: t[15] || "", search: t[16] || "", hash: t[17] || "" } }, makePathAbsolute: function (e, t) { if (e && e.charAt(0) === "/") return e; for (var e = e || "", n = (t = t ? t.replace(/^\/|(\/[^\/]*|[^\/]+)$/g, "") : "") ? t.split("/") : [], r = e.split("/"), i = 0; i < r.length; i++) { var s = r[i]; switch (s) { case ".": break; case "..": n.length && n.pop(); break; default: n.push(s) } } return "/" + n.join("/") }, isSameDomain: function (e, t) { return d.parseUrl(e).domain === d.parseUrl(t).domain }, isRelativeUrl: function (e) { return d.parseUrl(e).protocol === "" }, isAbsoluteUrl: function (e) { return d.parseUrl(e).protocol !== "" }, makeUrlAbsolute: function (e, t) { if (!d.isRelativeUrl(e)) return e; var n = d.parseUrl(e), r = d.parseUrl(t), i = n.protocol || r.protocol, s = n.protocol ? n.doubleSlash : n.doubleSlash || r.doubleSlash, o = n.authority || r.authority, u = n.pathname !== "", a = d.makePathAbsolute(n.pathname || r.filename, r.pathname); return i + s + o + a + (n.search || !u && r.search || "") + n.hash }, addSearchParams: function (t, n) { var r = d.parseUrl(t), i = typeof n === "object" ? e.param(n) : n, s = r.search || "?"; return r.hrefNoSearch + s + (s.charAt(s.length - 1) !== "?" ? "&" : "") + i + (r.hash || "") }, convertUrlToDataUrl: function (e) { var t = d.parseUrl(e); if (d.isEmbeddedPage(t)) return t.hash.split(b)[0].replace(/^#/, ""); else if (d.isSameDomain(t, S)) return t.hrefNoHash.replace(S.domain, ""); return e }, get: function (e) { if (e === r) e = location.hash; return d.stripHash(e).replace(/[^\/]*\.[^\/*]+$/, "") }, getFilePath: function (t) { var n = "&" + e.mobile.subPageUrlKey; return t && t.split(n)[0].split(b)[0] }, set: function (e) { location.hash = e }, isPath: function (e) { return /\//.test(e) }, clean: function (e) { return e.replace(S.domain, "") }, stripHash: function (e) { return e.replace(/^#/, "") }, cleanHash: function (e) { return d.stripHash(e.replace(/\?.*$/, "").replace(b, "")) }, isExternal: function (e) { e = d.parseUrl(e); return e.protocol && e.domain !== E.domain ? true : false }, hasProtocol: function (e) { return /^(:?\w+:)/.test(e) }, isFirstPageUrl: function (t) { var t = d.parseUrl(d.makeUrlAbsolute(t, S)), n = e.mobile.firstPage, n = n && n[0] ? n[0].id : r; return (t.hrefNoHash === E.hrefNoHash || x && t.hrefNoHash === S.hrefNoHash) && (!t.hash || t.hash === "#" || n && t.hash.replace(/^#/, "") === n) }, isEmbeddedPage: function (e) { e = d.parseUrl(e); return e.protocol !== "" ? e.hash && (e.hrefNoHash === E.hrefNoHash || x && e.hrefNoHash === S.hrefNoHash) : /^#/.test(e.href) } }, v = null, m = { stack: [], activeIndex: 0, getActive: function () { return m.stack[m.activeIndex] }, getPrev: function () { return m.stack[m.activeIndex - 1] }, getNext: function () { return m.stack[m.activeIndex + 1] }, addNew: function (e, t, n, r, i) { m.getNext() && m.clearForward(); m.stack.push({ url: e, transition: t, title: n, pageUrl: r, role: i }); m.activeIndex = m.stack.length - 1 }, clearForward: function () { m.stack = m.stack.slice(0, m.activeIndex + 1) }, directHashChange: function (t) { var n, i, s; this.getActive(); e.each(m.stack, function (e, r) { t.currentUrl === r.url && (n = e < m.activeIndex, i = !n, s = e) }); this.activeIndex = s !== r ? s : this.activeIndex; n ? (t.either || t.isBack)(true) : i && (t.either || t.isForward)(false) }, ignoreNextHashChange: false }, g = [], y = false, b = "&ui-state=dialog", w = p.children("base"), E = d.parseUrl(location.href), S = w.length ? d.parseUrl(d.makeUrlAbsolute(w.attr("href"), E.href)) : E, x = E.hrefNoHash !== S.hrefNoHash, T = e.support.dynamicBaseTag ? { element: w.length ? w : e("<base>", { href: S.hrefNoHash }).prependTo(p), set: function (e) { T.element.attr("href", d.makeUrlAbsolute(e, S)) }, reset: function () { T.element.attr("href", S.hrefNoHash) } } : r; e.mobile.focusPage = function (e) { var t = e.find("[autofocus]"), n = e.find(".ui-title:eq(0)"); t.length ? t.focus() : n.length ? n.focus() : e.focus() }; var N = true, C, k; C = function () { if (N) { var t = e.mobile.urlHistory.getActive(); if (t) { var n = h.scrollTop(); t.lastScroll = n < e.mobile.minScrollBack ? e.mobile.defaultHomeScroll : n } } }; k = function () { setTimeout(C, 100) }; h.bind(e.support.pushState ? "popstate" : "hashchange", function () { N = false }); h.one(e.support.pushState ? "popstate" : "hashchange", function () { N = true }); h.one("pagecontainercreate", function () { e.mobile.pageContainer.bind("pagechange", function () { N = true; h.unbind("scrollstop", k); h.bind("scrollstop", k) }) }); h.bind("scrollstop", k); e.mobile.getScreenHeight = u; e.fn.animationComplete = function (t) { return e.support.cssTransitions ? e(this).one("webkitAnimationEnd animationend", t) : (setTimeout(t, 0), e(this)) }; e.mobile.path = d; e.mobile.base = T; e.mobile.urlHistory = m; e.mobile.dialogHashKey = b; e.mobile.allowCrossDomainPages = false; e.mobile.getDocumentUrl = function (t) { return t ? e.extend({}, E) : E.href }; e.mobile.getDocumentBase = function (t) { return t ? e.extend({}, S) : S.href }; e.mobile._bindPageRemove = function () { var t = e(this); !t.data("page").options.domCache && t.is(":jqmData(external-page='true')") && t.bind("pagehide.remove", function () { var t = e(this), n = new e.Event("pageremove"); t.trigger(n); n.isDefaultPrevented() || t.removeWithDependents() }) }; e.mobile.loadPage = function (t, n) { var i = e.Deferred(), s = e.extend({}, e.mobile.loadPage.defaults, n), o = null, u = null, a = d.makeUrlAbsolute(t, e.mobile.activePage && c(e.mobile.activePage) || S.hrefNoHash); if (s.data && s.type === "get") a = d.addSearchParams(a, s.data), s.data = r; if (s.data && s.type === "post") s.reloadPage = true; var l = d.getFilePath(a), h = d.convertUrlToDataUrl(a); s.pageContainer = s.pageContainer || e.mobile.pageContainer; o = s.pageContainer.children(":jqmData(url='" + h + "')"); o.length === 0 && h && !d.isPath(h) && (o = s.pageContainer.children("#" + h).attr("data-" + e.mobile.ns + "url", h)); if (o.length === 0) if (e.mobile.firstPage && d.isFirstPageUrl(l)) e.mobile.firstPage.parent().length && (o = e(e.mobile.firstPage)); else if (d.isEmbeddedPage(l)) return i.reject(a, n), i.promise(); T && T.reset(); if (o.length) { if (!s.reloadPage) return f(o, s.role), i.resolve(a, n, o), i.promise(); u = o } var p = s.pageContainer, v = new e.Event("pagebeforeload"), m = { url: t, absUrl: a, dataUrl: h, deferred: i, options: s }; p.trigger(v, m); if (v.isDefaultPrevented()) return i.promise(); if (s.showLoadMsg) var g = setTimeout(function () { e.mobile.showPageLoadingMsg() }, s.loadMsgDelay); !e.mobile.allowCrossDomainPages && !d.isSameDomain(E, a) ? i.reject(a, n) : e.ajax({ url: l, type: s.type, data: s.data, dataType: "html", success: function (r, c, p) { var v = e("<div></div>"), y = r.match(/<title[^>]*>([^<]*)/) && RegExp.$1, b = RegExp("\\bdata-" + e.mobile.ns + "url=[\"']?([^\"'>]*)[\"']?"); RegExp("(<[^>]+\\bdata-" + e.mobile.ns + "role=[\"']?page[\"']?[^>]*>)").test(r) && RegExp.$1 && b.test(RegExp.$1) && RegExp.$1 && (t = l = d.getFilePath(RegExp.$1)); T && T.set(l); v.get(0).innerHTML = r; o = v.find(":jqmData(role='page'), :jqmData(role='dialog')").first(); o.length || (o = e("<div data-" + e.mobile.ns + "role='page'>" + r.split(/<\/?body[^>]*>/gmi)[1] + "</div>")); y && !o.jqmData("title") && (~y.indexOf("&") && (y = e("<div>" + y + "</div>").text()), o.jqmData("title", y)); if (!e.support.dynamicBaseTag) { var w = d.get(l); o.find("[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]").each(function () { var t = e(this).is("[href]") ? "href" : e(this).is("[src]") ? "src" : "action", n = e(this).attr(t), n = n.replace(location.protocol + "//" + location.host + location.pathname, ""); /^(\w+:|#|\/)/.test(n) || e(this).attr(t, w + n) }) } o.attr("data-" + e.mobile.ns + "url", d.convertUrlToDataUrl(l)).attr("data-" + e.mobile.ns + "external-page", true).appendTo(s.pageContainer); o.one("pagecreate", e.mobile._bindPageRemove); f(o, s.role); a.indexOf("&" + e.mobile.subPageUrlKey) > -1 && (o = s.pageContainer.children(":jqmData(url='" + h + "')")); s.showLoadMsg && (clearTimeout(g), e.mobile.hidePageLoadingMsg()); m.xhr = p; m.textStatus = c; m.page = o; s.pageContainer.trigger("pageload", m); i.resolve(a, n, o, u) }, error: function (t, r, o) { T && T.set(d.get()); m.xhr = t; m.textStatus = r; m.errorThrown = o; t = new e.Event("pageloadfailed"); s.pageContainer.trigger(t, m); t.isDefaultPrevented() || (s.showLoadMsg && (clearTimeout(g), e.mobile.hidePageLoadingMsg(), e.mobile.showPageLoadingMsg(e.mobile.pageLoadErrorMessageTheme, e.mobile.pageLoadErrorMessage, true), setTimeout(e.mobile.hidePageLoadingMsg, 1500)), i.reject(a, n)) } }); return i.promise() }; e.mobile.loadPage.defaults = { type: "get", data: r, reloadPage: false, role: r, showLoadMsg: false, pageContainer: r, loadMsgDelay: 50 }; e.mobile.changePage = function (t, u) { if (y) g.unshift(arguments); else { var a = e.extend({}, e.mobile.changePage.defaults, u); a.pageContainer = a.pageContainer || e.mobile.pageContainer; a.fromPage = a.fromPage || e.mobile.activePage; var l = a.pageContainer, c = new e.Event("pagebeforechange"), h = { toPage: t, options: a }; l.trigger(c, h); if (!c.isDefaultPrevented()) if (t = h.toPage, y = true, typeof t == "string") e.mobile.loadPage(t, a).done(function (t, n, r, i) { y = false; n.duplicateCachedPage = i; e.mobile.changePage(r, n) }).fail(function () { y = false; i(true); s(); a.pageContainer.trigger("pagechangefailed", h) }); else { if (t[0] === e.mobile.firstPage[0] && !a.dataUrl) a.dataUrl = E.hrefNoHash; var c = a.fromPage, p = a.dataUrl && d.convertUrlToDataUrl(a.dataUrl) || t.jqmData("url"), v = p; d.getFilePath(p); var w = m.getActive(), S = m.activeIndex === 0, x = 0, T = n.title, N = a.role === "dialog" || t.jqmData("role") === "dialog"; if (c && c[0] === t[0] && !a.allowSamePageTransition) y = false, l.trigger("pagechange", h); else { f(t, a.role); a.fromHashChange && m.directHashChange({ currentUrl: p, isBack: function () { x = -1 }, isForward: function () { x = 1 } }); try { n.activeElement && n.activeElement.nodeName.toLowerCase() != "body" ? e(n.activeElement).blur() : e("input:focus, textarea:focus, select:focus").blur() } catch (C) { } N && w && (p = (w.url || "") + b); if (a.changeHash !== false && p) m.ignoreNextHashChange = true, d.set(p); var k = !w ? T : t.jqmData("title") || t.children(":jqmData(role='header')").find(".ui-title").getEncodedText(); k && T == n.title && (T = k); t.jqmData("title") || t.jqmData("title", T); a.transition = a.transition || (x && !S ? w.transition : r) || (N ? e.mobile.defaultDialogTransition : e.mobile.defaultPageTransition); x || m.addNew(p, a.transition, T, v, a.role); n.title = m.getActive().title; e.mobile.activePage = t; a.reverse = a.reverse || x < 0; o(t, c, a.transition, a.reverse).done(function (n, r, o, u, f) { i(); a.duplicateCachedPage && a.duplicateCachedPage.remove(); f || e.mobile.focusPage(t); s(); l.trigger("pagechange", h) }) } } } }; e.mobile.changePage.defaults = { transition: r, reverse: false, changeHash: true, fromHashChange: false, role: r, duplicateCachedPage: r, pageContainer: r, showLoadMsg: true, dataUrl: r, fromPage: r, allowSamePageTransition: false }; e.mobile._registerInternalEvents = function () { e(n).delegate("form", "submit", function (t) { var n = e(this); if (e.mobile.ajaxEnabled && !n.is(":jqmData(ajax='false')") && n.jqmHijackable().length) { var r = n.attr("method"), i = n.attr("target"), s = n.attr("action"); if (!s && (s = c(n), s === S.hrefNoHash)) s = E.hrefNoSearch; s = d.makeUrlAbsolute(s, c(n)); !d.isExternal(s) && !i && (e.mobile.changePage(s, { type: r && r.length && r.toLowerCase() || "get", data: n.serialize(), transition: n.jqmData("transition"), direction: n.jqmData("direction"), reloadPage: true }), t.preventDefault()) } }); e(n).bind("vclick", function (t) { if (!(t.which > 1) && e.mobile.linkBindingEnabled && (t = l(t.target), e(t).jqmHijackable().length && t && d.parseUrl(t.getAttribute("href") || "#").hash !== "#")) i(true), v = e(t).closest(".ui-btn").not(".ui-disabled"), v.addClass(e.mobile.activeBtnClass), e("." + e.mobile.activePageClass + " .ui-btn").not(t).blur(), e(t).jqmData("href", e(t).attr("href")).attr("href", "#") }); e(n).bind("click", function (n) { if (e.mobile.linkBindingEnabled) { var s = l(n.target), o = e(s), u; if (s && !(n.which > 1) && o.jqmHijackable().length) { u = function () { t.setTimeout(function () { i(true) }, 200) }; o.jqmData("href") && o.attr("href", o.jqmData("href")); if (o.is(":jqmData(rel='back')")) return t.history.back(), false; var a = c(o), s = d.makeUrlAbsolute(o.attr("href") || "#", a); if (!e.mobile.ajaxEnabled && !d.isEmbeddedPage(s)) u(); else { if (s.search("#") != -1) if (s = s.replace(/[^#]*#/, "")) s = d.isPath(s) ? d.makeUrlAbsolute(s, a) : d.makeUrlAbsolute("#" + s, E.hrefNoHash); else { n.preventDefault(); return } var a = o.is("[rel='external']") || o.is(":jqmData(ajax='false')") || o.is("[target]"), f = e.mobile.allowCrossDomainPages && E.protocol === "file:" && s.search(/^https?:/) != -1; a || d.isExternal(s) && !f ? u() : (u = o.jqmData("transition"), a = (a = o.jqmData("direction")) && a === "reverse" || o.jqmData("back"), o = o.attr("data-" + e.mobile.ns + "rel") || r, e.mobile.changePage(s, { transition: u, reverse: a, role: o }), n.preventDefault()) } } } }); e(n).delegate(".ui-page", "pageshow.prefetch", function () { var t = []; e(this).find("a:jqmData(prefetch)").each(function () { var n = e(this), r = n.attr("href"); r && e.inArray(r, t) === -1 && (t.push(r), e.mobile.loadPage(r, { role: n.attr("data-" + e.mobile.ns + "rel") })) }) }); e.mobile._handleHashChange = function (n) { var i = d.stripHash(n), s = { transition: e.mobile.urlHistory.stack.length === 0 ? "none" : r, changeHash: false, fromHashChange: true }; if (!e.mobile.hashListeningEnabled || m.ignoreNextHashChange) m.ignoreNextHashChange = false; else { if (m.stack.length > 1 && i.indexOf(b) > -1) if (e.mobile.activePage.is(".ui-dialog")) m.directHashChange({ currentUrl: i, either: function (t) { var n = e.mobile.urlHistory.getActive(); i = n.pageUrl; e.extend(s, { role: n.role, transition: n.transition, reverse: t }) } }); else { m.directHashChange({ currentUrl: i, isBack: function () { t.history.back() }, isForward: function () { t.history.forward() } }); return } i ? (i = typeof i === "string" && !d.isPath(i) ? d.makeUrlAbsolute("#" + i, S) : i, e.mobile.changePage(i, s)) : e.mobile.changePage(e.mobile.firstPage, s) } }; h.bind("hashchange", function () { e.mobile._handleHashChange(location.hash) }); e(n).bind("pageshow", a); e(t).bind("throttledresize", a) } })(jQuery); (function (e, t) { var r = {}, i = e(t), s = e.mobile.path.parseUrl(location.href); e.extend(r, { initialFilePath: s.pathname + s.search, initialHref: s.hrefNoHash, state: function () { return { hash: location.hash || "#" + r.initialFilePath, title: n.title, initialHref: r.initialHref } }, resetUIKeys: function (t) { var n = "&" + e.mobile.subPageUrlKey, r = t.indexOf(e.mobile.dialogHashKey); r > -1 ? t = t.slice(0, r) + "#" + t.slice(r) : t.indexOf(n) > -1 && (t = t.split(n).join("#" + n)); return t }, hashValueAfterReset: function (t) { t = r.resetUIKeys(t); return e.mobile.path.parseUrl(t).hash }, nextHashChangePrevented: function (t) { e.mobile.urlHistory.ignoreNextHashChange = t; r.onHashChangeDisabled = t }, onHashChange: function () { if (!r.onHashChangeDisabled) { var t, i; t = location.hash; var s = e.mobile.path.isPath(t), o = s ? location.href : e.mobile.getDocumentUrl(); t = s ? t.replace("#", "") : t; i = r.state(); t = e.mobile.path.makeUrlAbsolute(t, o); s && (t = r.resetUIKeys(t)); history.replaceState(i, n.title, t) } }, onPopState: function (t) { var t = t.originalEvent.state, n, s; if (t) { n = r.hashValueAfterReset(e.mobile.urlHistory.getActive().url); s = r.hashValueAfterReset(t.hash.replace("#", "")); if (n = n !== s) i.one("hashchange.pushstate", function () { r.nextHashChangePrevented(false) }); r.nextHashChangePrevented(false); e.mobile._handleHashChange(t.hash); n && r.nextHashChangePrevented(true) } }, init: function () { i.bind("hashchange", r.onHashChange); i.bind("popstate", r.onPopState); location.hash === "" && history.replaceState(r.state(), n.title, location.href) } }); e(function () { e.mobile.pushStateEnabled && e.support.pushState && r.init() }) })(jQuery, this); jQuery.mobile.transitionFallbacks.pop = "fade"; (function (e) { e.mobile.transitionHandlers.slide = e.mobile.transitionHandlers.simultaneous; e.mobile.transitionFallbacks.slide = "fade" })(jQuery, this); jQuery.mobile.transitionFallbacks.slidedown = "fade"; jQuery.mobile.transitionFallbacks.slideup = "fade"; jQuery.mobile.transitionFallbacks.flip = "fade"; jQuery.mobile.transitionFallbacks.flow = "fade"; jQuery.mobile.transitionFallbacks.turn = "fade"; (function (e) { e.mobile.page.prototype.options.degradeInputs = { color: false, date: false, datetime: false, "datetime-local": false, email: false, month: false, number: false, range: "number", search: "text", tel: false, time: false, url: false, week: false }; e(n).bind("pagecreate create", function (t) { var n = e.mobile.closestPageData(e(t.target)), r; if (n) r = n.options, e(t.target).find("input").not(n.keepNativeSelector()).each(function () { var t = e(this), n = this.getAttribute("type"), i = r.degradeInputs[n] || "text"; if (r.degradeInputs[n]) { var s = e("<div>").html(t.clone()).html(), o = s.indexOf(" type=") > -1; t.replaceWith(s.replace(o ? /\s+type=["']?\w+['"]?/ : /\/?>/, ' type="' + i + '" data-' + e.mobile.ns + 'type="' + n + '"' + (o ? "" : ">"))) } }) }) })(jQuery); (function (e) { e(n).bind("pagecreate create", function (t) { e(":jqmData(role='nojs')", t.target).addClass("ui-nojs") }) })(jQuery); (function (e, t) { function r(e) { for (var t; e;) { if ((t = typeof e.className === "string" && e.className + " ") && t.indexOf("ui-btn ") > -1 && t.indexOf("ui-disabled ") < 0) break; e = e.parentNode } return e } e.fn.buttonMarkup = function (r) { for (var r = r && e.type(r) == "object" ? r : {}, s = 0; s < this.length; s++) { var o = this.eq(s), u = o[0], a = e.extend({}, e.fn.buttonMarkup.defaults, { icon: r.icon !== t ? r.icon : o.jqmData("icon"), iconpos: r.iconpos !== t ? r.iconpos : o.jqmData("iconpos"), theme: r.theme !== t ? r.theme : o.jqmData("theme") || e.mobile.getInheritedTheme(o, "c"), inline: r.inline !== t ? r.inline : o.jqmData("inline"), shadow: r.shadow !== t ? r.shadow : o.jqmData("shadow"), corners: r.corners !== t ? r.corners : o.jqmData("corners"), iconshadow: r.iconshadow !== t ? r.iconshadow : o.jqmData("iconshadow"), mini: r.mini !== t ? r.mini : o.jqmData("mini") }, r), f = "ui-btn-inner", l, c, h, p, d, v; e.each(a, function (t, n) { u.setAttribute("data-" + e.mobile.ns + t, n); o.jqmData(t, n) }); (v = e.data(u.tagName === "INPUT" || u.tagName === "BUTTON" ? u.parentNode : u, "buttonElements")) ? (u = v.outer, o = e(u), h = v.inner, p = v.text, e(v.icon).remove(), v.icon = null) : (h = n.createElement(a.wrapperEls), p = n.createElement(a.wrapperEls)); d = a.icon ? n.createElement("span") : null; i && !v && i(); if (!a.theme) a.theme = e.mobile.getInheritedTheme(o, "c"); l = "ui-btn ui-btn-up-" + a.theme; l += a.inline ? " ui-btn-inline" : ""; l += a.shadow ? " ui-shadow" : ""; l += a.corners ? " ui-btn-corner-all" : ""; a.mini !== t && (l += a.mini ? " ui-mini" : " ui-fullsize"); a.inline !== t && (l += a.inline === false ? " ui-btn-block" : " ui-btn-inline"); if (a.icon) a.icon = "ui-icon-" + a.icon, a.iconpos = a.iconpos || "left", c = "ui-icon " + a.icon, a.iconshadow && (c += " ui-icon-shadow"); a.iconpos && (l += " ui-btn-icon-" + a.iconpos, a.iconpos == "notext" && !o.attr("title") && o.attr("title", o.getEncodedText())); f += a.corners ? " ui-btn-corner-all" : ""; a.iconpos && a.iconpos === "notext" && !o.attr("title") && o.attr("title", o.getEncodedText()); v && o.removeClass(v.bcls || ""); o.removeClass("ui-link").addClass(l); h.className = f; p.className = "ui-btn-text"; v || h.appendChild(p); if (d && (d.className = c, !v || !v.icon)) d.appendChild(n.createTextNode(" ")), h.appendChild(d); for (; u.firstChild && !v;) p.appendChild(u.firstChild); v || u.appendChild(h); v = { bcls: l, outer: u, inner: h, text: p, icon: d }; e.data(u, "buttonElements", v); e.data(h, "buttonElements", v); e.data(p, "buttonElements", v); d && e.data(d, "buttonElements", v) } return this }; e.fn.buttonMarkup.defaults = { corners: true, shadow: true, iconshadow: true, wrapperEls: "span" }; var i = function () { var t = e.mobile.buttonMarkup.hoverDelay, s, o; e(n).bind({ "vmousedown vmousecancel vmouseup vmouseover vmouseout focus blur scrollstart": function (n) { var i, u = e(r(n.target)), n = n.type; if (u.length) if (i = u.attr("data-" + e.mobile.ns + "theme"), n === "vmousedown") e.support.touch ? s = setTimeout(function () { u.removeClass("ui-btn-up-" + i).addClass("ui-btn-down-" + i) }, t) : u.removeClass("ui-btn-up-" + i).addClass("ui-btn-down-" + i); else if (n === "vmousecancel" || n === "vmouseup") u.removeClass("ui-btn-down-" + i).addClass("ui-btn-up-" + i); else if (n === "vmouseover" || n === "focus") e.support.touch ? o = setTimeout(function () { u.removeClass("ui-btn-up-" + i).addClass("ui-btn-hover-" + i) }, t) : u.removeClass("ui-btn-up-" + i).addClass("ui-btn-hover-" + i); else if (n === "vmouseout" || n === "blur" || n === "scrollstart") u.removeClass("ui-btn-hover-" + i + " ui-btn-down-" + i).addClass("ui-btn-up-" + i), s && clearTimeout(s), o && clearTimeout(o) }, "focusin focus": function (t) { e(r(t.target)).addClass(e.mobile.focusClass) }, "focusout blur": function (t) { e(r(t.target)).removeClass(e.mobile.focusClass) } }); i = null }; e(n).bind("pagecreate create", function (t) { e(":jqmData(role='button'), .ui-bar > a, .ui-header > a, .ui-footer > a, .ui-bar > :jqmData(role='controlgroup') > a", t.target).not(".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").buttonMarkup() }) })(jQuery); (function (e) { e.widget("mobile.collapsible", e.mobile.widget, { options: { expandCueText: " click to expand contents", collapseCueText: " click to collapse contents", collapsed: true, heading: "h1,h2,h3,h4,h5,h6,legend", theme: null, contentTheme: null, iconTheme: "d", mini: false, initSelector: ":jqmData(role='collapsible')" }, _create: function () { var t = this.element, n = this.options, r = t.addClass("ui-collapsible"), i = t.children(n.heading).first(), s = r.wrapInner("<div class='ui-collapsible-content'></div>").find(".ui-collapsible-content"), o = t.closest(":jqmData(role='collapsible-set')").addClass("ui-collapsible-set"); i.is("legend") && (i = e("<div role='heading'>" + i.html() + "</div>").insertBefore(i), i.next().remove()); if (o.length) { if (!n.theme) n.theme = o.jqmData("theme") || e.mobile.getInheritedTheme(o, "c"); if (!n.contentTheme) n.contentTheme = o.jqmData("content-theme"); if (!n.iconPos) n.iconPos = o.jqmData("iconpos"); if (!n.mini) n.mini = o.jqmData("mini") } s.addClass(n.contentTheme ? "ui-body-" + n.contentTheme : ""); i.insertBefore(s).addClass("ui-collapsible-heading").append("<span class='ui-collapsible-heading-status'></span>").wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().buttonMarkup({ shadow: false, corners: false, iconpos: t.jqmData("iconpos") || n.iconPos || "left", icon: "plus", mini: n.mini, theme: n.theme }).add(".ui-btn-inner", t).addClass("ui-corner-top ui-corner-bottom"); r.bind("expand collapse", function (t) { if (!t.isDefaultPrevented()) { t.preventDefault(); var u = e(this), t = t.type === "collapse", a = n.contentTheme; i.toggleClass("ui-collapsible-heading-collapsed", t).find(".ui-collapsible-heading-status").text(t ? n.expandCueText : n.collapseCueText).end().find(".ui-icon").toggleClass("ui-icon-minus", !t).toggleClass("ui-icon-plus", t); u.toggleClass("ui-collapsible-collapsed", t); s.toggleClass("ui-collapsible-content-collapsed", t).attr("aria-hidden", t); if (a && (!o.length || r.jqmData("collapsible-last"))) i.find("a").first().add(i.find(".ui-btn-inner")).toggleClass("ui-corner-bottom", t), s.toggleClass("ui-corner-bottom", !t); s.trigger("updatelayout") } }).trigger(n.collapsed ? "collapse" : "expand"); i.bind("click", function (e) { var t = i.is(".ui-collapsible-heading-collapsed") ? "expand" : "collapse"; r.trigger(t); e.preventDefault() }) } }); e(n).bind("pagecreate create", function (t) { e.mobile.collapsible.prototype.enhanceWithin(t.target) }) })(jQuery); (function (e, t) { e.widget("mobile.collapsibleset", e.mobile.widget, { options: { initSelector: ":jqmData(role='collapsible-set')" }, _create: function () { var n = this.element.addClass("ui-collapsible-set"), r = this.options; if (!r.theme) r.theme = e.mobile.getInheritedTheme(n, "c"); if (!r.contentTheme) r.contentTheme = n.jqmData("content-theme"); if (!r.corners) r.corners = n.jqmData("corners") === t ? true : false; n.jqmData("collapsiblebound") || n.jqmData("collapsiblebound", true).bind("expand collapse", function (t) { var n = t.type === "collapse", t = e(t.target).closest(".ui-collapsible"), r = t.data("collapsible"); r.options.contentTheme && t.jqmData("collapsible-last") && (t.find(r.options.heading).first().find("a").first().add(".ui-btn-inner").toggleClass("ui-corner-bottom", n), t.find(".ui-collapsible-content").toggleClass("ui-corner-bottom", !n)) }).bind("expand", function (t) { e(t.target).closest(".ui-collapsible").siblings(".ui-collapsible").trigger("collapse") }) }, _init: function () { this.refresh() }, refresh: function () { var t = this.options, n = this.element.children(":jqmData(role='collapsible')"); e.mobile.collapsible.prototype.enhance(n.not(".ui-collapsible")); n.each(function () { e(this).find(e.mobile.collapsible.prototype.options.heading).find("a").first().add(".ui-btn-inner").removeClass("ui-corner-top ui-corner-bottom") }); n.first().find("a").first().addClass(t.corners ? "ui-corner-top" : "").find(".ui-btn-inner").addClass("ui-corner-top"); n.last().jqmData("collapsible-last", true).find("a").first().addClass(t.corners ? "ui-corner-bottom" : "").find(".ui-btn-inner").addClass("ui-corner-bottom") } }); e(n).bind("pagecreate create", function (t) { e.mobile.collapsibleset.prototype.enhanceWithin(t.target) }) })(jQuery); (function (e) { var t = e("meta[name=viewport]"), n = t.attr("content"), r = n + ",maximum-scale=1, user-scalable=no", i = n + ",maximum-scale=10, user-scalable=yes", s = /(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(n); e.mobile.zoom = e.extend({}, { enabled: !s, locked: false, disable: function (n) { if (!s && !e.mobile.zoom.locked) t.attr("content", r), e.mobile.zoom.enabled = false, e.mobile.zoom.locked = n || false }, enable: function (n) { if (!s && (!e.mobile.zoom.locked || n === true)) t.attr("content", i), e.mobile.zoom.enabled = true, e.mobile.zoom.locked = false }, restore: function () { if (!s) t.attr("content", n), e.mobile.zoom.enabled = true } }) })(jQuery); (function (e) { e.widget("mobile.textinput", e.mobile.widget, { options: { theme: null, preventFocusZoom: /iPhone|iPad|iPod/.test(navigator.platform) && navigator.userAgent.indexOf("AppleWebKit") > -1, initSelector: "input[type='text'], input[type='search'], :jqmData(type='search'), input[type='number'], :jqmData(type='number'), input[type='password'], input[type='email'], input[type='url'], input[type='tel'], textarea, input[type='time'], input[type='date'], input[type='month'], input[type='week'], input[type='datetime'], input[type='datetime-local'], input[type='color'], input:not([type])", clearSearchButtonText: "clear text" }, _create: function () { var r = this.element, i = this.options, s = i.theme || e.mobile.getInheritedTheme(this.element, "c"), o = " ui-body-" + s, u = r.jqmData("mini") == true, a = u ? " ui-mini" : "", f, l; e("label[for='" + r.attr("id") + "']").addClass("ui-input-text"); f = r.addClass("ui-input-text ui-body-" + s); typeof r[0].autocorrect !== "undefined" && !e.support.touchOverflow && (r[0].setAttribute("autocorrect", "off"), r[0].setAttribute("autocomplete", "off")); r.is("[type='search'],:jqmData(type='search')") ? (f = r.wrap("<div class='ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield" + o + a + "'></div>").parent(), l = e("<a href='#' class='ui-input-clear' title='" + i.clearSearchButtonText + "'>" + i.clearSearchButtonText + "</a>").bind("click", function (e) { r.val("").focus().trigger("change"); l.addClass("ui-input-clear-hidden"); e.preventDefault() }).appendTo(f).buttonMarkup({ icon: "delete", iconpos: "notext", corners: true, shadow: true, mini: u }), s = function () { setTimeout(function () { l.toggleClass("ui-input-clear-hidden", !r.val()) }, 0) }, s(), r.bind("paste cut keyup focus change blur", s)) : r.addClass("ui-corner-all ui-shadow-inset" + o + a); r.focus(function () { f.addClass(e.mobile.focusClass) }).blur(function () { f.removeClass(e.mobile.focusClass) }).bind("focus", function () { i.preventFocusZoom && e.mobile.zoom.disable(true) }).bind("blur", function () { i.preventFocusZoom && e.mobile.zoom.enable(true) }); if (r.is("textarea")) { var c = function () { var e = r[0].scrollHeight; r[0].clientHeight < e && r.height(e + 15) }, h; r.keyup(function () { clearTimeout(h); h = setTimeout(c, 100) }); e(n).one("pagechange", c); e.trim(r.val()) && e(t).load(c) } }, disable: function () { (this.element.attr("disabled", true).is("[type='search'],:jqmData(type='search')") ? this.element.parent() : this.element).addClass("ui-disabled") }, enable: function () { (this.element.attr("disabled", false).is("[type='search'],:jqmData(type='search')") ? this.element.parent() : this.element).removeClass("ui-disabled") } }); e(n).bind("pagecreate create", function (t) { e.mobile.textinput.prototype.enhanceWithin(t.target, true) }) })(jQuery); (function (e, r) { e.widget("mobile.slider", e.mobile.widget, { options: { theme: null, trackTheme: null, disabled: false, initSelector: "input[type='range'], :jqmData(type='range'), :jqmData(role='slider')", mini: false }, _create: function () { var i = this, s = this.element, o = e.mobile.getInheritedTheme(s, "c"), u = this.options.theme || o, o = this.options.trackTheme || o, a = s[0].nodeName.toLowerCase(), f = a == "select" ? "ui-slider-switch" : "", l = s.attr("id"), c = l + "-label", l = e("[for='" + l + "']").attr("id", c), h = function () { return a == "input" ? parseFloat(s.val()) : s[0].selectedIndex }, p = a == "input" ? parseFloat(s.attr("min")) : 0, d = a == "input" ? parseFloat(s.attr("max")) : s.find("option").length - 1, v = t.parseFloat(s.attr("step") || 1), m = this.options.inline || s.jqmData("inline") == true ? " ui-slider-inline" : "", g = this.options.mini || s.jqmData("mini") ? " ui-slider-mini" : "", y = n.createElement("a"), b = e(y), w = n.createElement("div"), E = e(w), S = s.jqmData("highlight") && a != "select" ? function () { var t = n.createElement("div"); t.className = "ui-slider-bg ui-btn-active ui-btn-corner-all"; return e(t).prependTo(E) }() : false; y.setAttribute("href", "#"); w.setAttribute("role", "application"); w.className = ["ui-slider ", f, " ui-btn-down-", o, " ui-btn-corner-all", m, g].join(""); y.className = "ui-slider-handle"; w.appendChild(y); b.buttonMarkup({ corners: true, theme: u, shadow: true }).attr({ role: "slider", "aria-valuemin": p, "aria-valuemax": d, "aria-valuenow": h(), "aria-valuetext": h(), title: h(), "aria-labelledby": c }); e.extend(this, { slider: E, handle: b, valuebg: S, dragging: false, beforeStart: null, userModified: false, mouseMoved: false }); if (a == "select") { u = n.createElement("div"); u.className = "ui-slider-inneroffset"; f = 0; for (c = w.childNodes.length; f < c; f++) u.appendChild(w.childNodes[f]); w.appendChild(u); b.addClass("ui-slider-handle-snapping"); w = s.find("option"); u = 0; for (f = w.length; u < f; u++) c = !u ? "b" : "a", m = !u ? " ui-btn-down-" + o : " " + e.mobile.activeBtnClass, n.createElement("div"), g = n.createElement("span"), g.className = ["ui-slider-label ui-slider-label-", c, m, " ui-btn-corner-all"].join(""), g.setAttribute("role", "img"), g.appendChild(n.createTextNode(w[u].innerHTML)), e(g).prependTo(E); i._labels = e(".ui-slider-label", E) } l.addClass("ui-slider"); s.addClass(a === "input" ? "ui-slider-input" : "ui-slider-switch").change(function () { i.mouseMoved || i.refresh(h(), true) }).keyup(function () { i.refresh(h(), true, true) }).blur(function () { i.refresh(h(), true) }); e(n).bind("vmousemove", function (e) { if (i.dragging) return i.mouseMoved = true, a === "select" && b.removeClass("ui-slider-handle-snapping"), i.refresh(e), i.userModified = i.beforeStart !== s[0].selectedIndex, false }); E.bind("vmousedown", function (e) { i.dragging = true; i.userModified = false; i.mouseMoved = false; if (a === "select") i.beforeStart = s[0].selectedIndex; i.refresh(e); return false }).bind("vclick", false); var x = 1; E.add(n).bind("vmouseup", function () { setTimeout(function () { if (x == 0) { i.dragging = true; i.userModified = false; i.mouseMoved = false; if (a === "select") i.beforeStart = s[0].selectedIndex; i.refresh(e); x = 1; localStorage.count = 0; if (i.dragging) return i.dragging = false, a === "select" && (b.addClass("ui-slider-handle-snapping"), i.mouseMoved ? i.refresh(i.beforeStart == 0 ? 1 : 0) : i.refresh(i.beforeStart == 0 ? 1 : 0)), i.mouseMoved = false } }, 200); if (i.dragging) return i.dragging = false, x = 0, a === "select" && (b.addClass("ui-slider-handle-snapping"), i.mouseMoved ? i.refresh(i.beforeStart == 0 ? 1 : 0) : i.refresh(i.beforeStart == 0 ? 1 : 0)), i.mouseMoved = false }); E.insertAfter(s); a == "select" && this.handle.bind({ focus: function () { E.addClass(e.mobile.focusClass) }, blur: function () { E.removeClass(e.mobile.focusClass) } }); this.handle.bind({ vmousedown: function () { e(this).focus() }, vclick: false, keydown: function (t) { var n = h(); if (!i.options.disabled) { switch (t.keyCode) { case e.mobile.keyCode.HOME: case e.mobile.keyCode.END: case e.mobile.keyCode.PAGE_UP: case e.mobile.keyCode.PAGE_DOWN: case e.mobile.keyCode.UP: case e.mobile.keyCode.RIGHT: case e.mobile.keyCode.DOWN: case e.mobile.keyCode.LEFT: if (t.preventDefault(), !i._keySliding) i._keySliding = true, e(this).addClass("ui-state-active") } switch (t.keyCode) { case e.mobile.keyCode.HOME: i.refresh(p); break; case e.mobile.keyCode.END: i.refresh(d); break; case e.mobile.keyCode.PAGE_UP: case e.mobile.keyCode.UP: case e.mobile.keyCode.RIGHT: i.refresh(n + v); break; case e.mobile.keyCode.PAGE_DOWN: case e.mobile.keyCode.DOWN: case e.mobile.keyCode.LEFT: i.refresh(n - v) } } }, keyup: function () { if (i._keySliding) i._keySliding = false, e(this).removeClass("ui-state-active") } }); this.refresh(r, r, true) }, refresh: function (t, n, r) { (this.options.disabled || this.element.attr("disabled")) && this.disable(); var i = this.element, s = i[0].nodeName.toLowerCase(), o = s === "input" ? parseFloat(i.attr("min")) : 0, u = s === "input" ? parseFloat(i.attr("max")) : i.find("option").length - 1, a = s === "input" && parseFloat(i.attr("step")) > 0 ? parseFloat(i.attr("step")) : 1; if (typeof t === "object") { if (!this.dragging || t.pageX < this.slider.offset().left - 8 || t.pageX > this.slider.offset().left + this.slider.width() + 8) return; t = Math.round((t.pageX - this.slider.offset().left) / this.slider.width() * 100) } else t == null && (t = s === "input" ? parseFloat(i.val() || 0) : i[0].selectedIndex), t = (parseFloat(t) - o) / (u - o) * 100; if (!isNaN(t)) { t < 0 && (t = 0); t > 100 && (t = 100); var f = t / 100 * (u - o) + o, l = (f - o) % a; f -= l; Math.abs(l) * 2 >= a && (f += l > 0 ? a : -a); f = parseFloat(f.toFixed(5)); f < o && (f = o); f > u && (f = u); this.handle.css("left", t + "%"); this.handle.attr({ "aria-valuenow": s === "input" ? f : i.find("option").eq(f).attr("value"), "aria-valuetext": s === "input" ? f : i.find("option").eq(f).getEncodedText(), title: s === "input" ? f : i.find("option").eq(f).getEncodedText() }); this.valuebg && this.valuebg.css("width", t + "%"); if (this._labels) { var o = this.handle.width() / this.slider.width() * 100, c = t && o + (100 - o) * t / 100, h = t === 100 ? 0 : Math.min(o + 100 - c, 100); this._labels.each(function () { var t = e(this).is(".ui-slider-label-a"); e(this).width((t ? c : h) + "%") }) } if (!r) r = false, s === "input" ? (r = i.val() !== f, i.val(f)) : (r = i[0].selectedIndex !== f, i[0].selectedIndex = f), !n && r && i.trigger("change") } }, enable: function () { this.element.attr("disabled", false); this.slider.removeClass("ui-disabled").attr("aria-disabled", false); return this._setOption("disabled", false) }, disable: function () { this.element.attr("disabled", true); this.slider.addClass("ui-disabled").attr("aria-disabled", true); return this._setOption("disabled", true) } }); e(n).bind("pagecreate create", function (t) { e.mobile.slider.prototype.enhanceWithin(t.target, true) }) })(jQuery); (function (e) { e.widget("mobile.selectmenu", e.mobile.widget, { options: { theme: null, disabled: false, icon: "arrow-d", iconpos: "right", inline: false, corners: true, shadow: true, iconshadow: true, overlayTheme: "a", hidePlaceholderMenuItems: true, closeText: "Close", nativeMenu: true, preventFocusZoom: /iPhone|iPad|iPod/.test(navigator.platform) && navigator.userAgent.indexOf("AppleWebKit") > -1, initSelector: "select:not(:jqmData(role='slider'))", mini: false }, _button: function () { return e("<div/>") }, _setDisabled: function (e) { this.element.attr("disabled", e); this.button.attr("aria-disabled", e); return this._setOption("disabled", e) }, _focusButton: function () { var e = this; setTimeout(function () { e.button.focus() }, 40) }, _selectOptions: function () { return this.select.find("option") }, _preExtension: function () { var t = ""; ~this.element[0].className.indexOf("ui-btn-left") && (t = " ui-btn-left"); ~this.element[0].className.indexOf("ui-btn-right") && (t = " ui-btn-right"); this.select = this.element.wrap("<div class='ui-select" + t + "'>"); this.selectID = this.select.attr("id"); this.label = e("label[for='" + this.selectID + "']").addClass("ui-select"); this.isMultiple = this.select[0].multiple; if (!this.options.theme) this.options.theme = e.mobile.getInheritedTheme(this.select, "c") }, _create: function () { this._preExtension(); this._trigger("beforeCreate"); this.button = this._button(); var n = this, r = this.options, i = this.button.text(e(this.select[0].options.item(this.select[0].selectedIndex == -1 ? 0 : this.select[0].selectedIndex)).text()).insertBefore(this.select).buttonMarkup({ theme: r.theme, icon: r.icon, iconpos: r.iconpos, inline: r.inline, corners: r.corners, shadow: r.shadow, iconshadow: r.iconshadow, mini: r.mini }); r.nativeMenu && t.opera && t.opera.version && this.select.addClass("ui-select-nativeonly"); if (this.isMultiple) this.buttonCount = e("<span>").addClass("ui-li-count ui-btn-up-c ui-btn-corner-all").hide().appendTo(i.addClass("ui-li-has-count")); (r.disabled || this.element.attr("disabled")) && this.disable(); this.select.change(function () { n.refresh() }); this.build() }, build: function () { var t = this; this.select.appendTo(t.button).bind("vmousedown", function () { t.button.addClass(e.mobile.activeBtnClass) }).bind("focus", function () { t.button.addClass(e.mobile.focusClass) }).bind("blur", function () { t.button.removeClass(e.mobile.focusClass) }).bind("focus vmouseover", function () { t.button.trigger("vmouseover") }).bind("vmousemove", function () { t.button.removeClass(e.mobile.activeBtnClass) }).bind("change blur vmouseout", function () { t.button.trigger("vmouseout").removeClass(e.mobile.activeBtnClass) }).bind("change blur", function () { t.button.removeClass("ui-btn-down-" + t.options.theme) }); t.button.bind("vmousedown", function () { t.options.preventFocusZoom && e.mobile.zoom.disable(true) }).bind("mouseup", function () { t.options.preventFocusZoom && e.mobile.zoom.enable(true) }) }, selected: function () { return this._selectOptions().filter(":selected") }, selectedIndices: function () { var e = this; return this.selected().map(function () { return e._selectOptions().index(this) }).get() }, setButtonText: function () { var t = this, n = this.selected(); this.button.find(".ui-btn-text").text(function () { return !t.isMultiple ? n.text() : n.length ? n.map(function () { return e(this).text() }).get().join(", ") : t.placeholder }) }, setButtonCount: function () { var e = this.selected(); this.isMultiple && this.buttonCount[e.length > 1 ? "show" : "hide"]().text(e.length) }, refresh: function () { this.setButtonText(); this.setButtonCount() }, open: e.noop, close: e.noop, disable: function () { this._setDisabled(true); this.button.addClass("ui-disabled") }, enable: function () { this._setDisabled(false); this.button.removeClass("ui-disabled") } }); e(n).bind("pagecreate create", function (t) { e.mobile.selectmenu.prototype.enhanceWithin(t.target, true) }) })(jQuery); (function (e, t) { function r() { var t = e("." + e.mobile.activeBtnClass).first(); a.css({ top: e.support.scrollTop && u.scrollTop() + u.height() / 2 || t.length && t.offset().top || 100 }) } function i() { var t = a.offset(), n = u.scrollTop(), s = e.mobile.getScreenHeight(); if (t.top < n || t.top - n > s) a.addClass("ui-loader-fakefix"), r(), u.unbind("scroll", i).bind("scroll", r) } function s() { o.removeClass("ui-mobile-rendering") } var o = e("html"); e("head"); var u = e(t); e(t.document).trigger("mobileinit"); if (e.mobile.gradeA()) { if (e.mobile.ajaxBlacklist) e.mobile.ajaxEnabled = false; o.addClass("ui-mobile ui-mobile-rendering"); setTimeout(s, 5e3); var a = e("<div class='ui-loader'><span class='ui-icon ui-icon-loading'></span><h1></h1></div>"); e.extend(e.mobile, { showPageLoadingMsg: function (t, n, r) { o.addClass("ui-loading"); if (e.mobile.loadingMessage) { var s = r || e.mobile.loadingMessageTextVisible; t = t || e.mobile.loadingMessageTheme; a.attr("class", "ui-loader ui-corner-all ui-body-" + (t || "a") + " ui-loader-" + (s ? "verbose" : "default") + (r ? " ui-loader-textonly" : "")).find("h1").text(n || e.mobile.loadingMessage).end().appendTo(e.mobile.pageContainer); i(); u.bind("scroll", i) } }, hidePageLoadingMsg: function () { o.removeClass("ui-loading"); e.mobile.loadingMessage && a.removeClass("ui-loader-fakefix"); e(t).unbind("scroll", r); e(t).unbind("scroll", i) }, initializePage: function () { var t = e(":jqmData(role='page'), :jqmData(role='dialog')"); t.length || (t = e("body").wrapInner("<div data-" + e.mobile.ns + "role='page'></div>").children(0)); t.each(function () { var t = e(this); t.jqmData("url") || t.attr("data-" + e.mobile.ns + "url", t.attr("id") || location.pathname + location.search) }); e.mobile.firstPage = t.first(); e.mobile.pageContainer = t.first().parent().addClass("ui-mobile-viewport"); u.trigger("pagecontainercreate"); e.mobile.showPageLoadingMsg(); s(); !e.mobile.hashListeningEnabled || !e.mobile.path.stripHash(location.hash) ? e.mobile.changePage(e.mobile.firstPage, { transition: "none", reverse: true, changeHash: false, fromHashChange: true }) : u.trigger("hashchange", [true]) } }); e.mobile._registerInternalEvents(); e(function () { t.scrollTo(0, 1); e.mobile.defaultHomeScroll = !e.support.scrollTop || e(t).scrollTop() === 1 ? 0 : 1; e.fn.controlgroup && e(n).bind("pagecreate create", function (t) { e(":jqmData(role='controlgroup')", t.target).jqmEnhanceable().controlgroup({ excludeInvisible: false }) }); e.mobile.autoInitializePage && e.mobile.initializePage(); u.load(e.mobile.silentScroll) }) } })(jQuery, this) })